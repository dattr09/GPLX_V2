@model GPLX.Models.DangKyKhoaHoc

@{
    ViewData["Title"] = "Thêm đăng ký khóa học";
}

<h1>@ViewData["Title"]</h1>

<form asp-action="Create" method="post">
    <div class="form-group">
        <label for="Cccd">CCCD</label>
        @if (ViewData["CongDanList"] != null)
        {
            var congDanList = ViewData["CongDanList"] as IEnumerable<GPLX.Models.CongDan>;
            @Html.DropDownListFor(m => m.Cccd, 
                new SelectList(congDanList, "Cccd", "HoTen"), 
                "-- Chọn CCCD --", 
                new { @class = "form-control" })
        }
        else
        {
            <p>Không có dữ liệu công dân để chọn.</p>
        }
    </div>

    <div class="form-group">
        <label for="MaLop">Mã lớp</label>
        @if (ViewData["MaLop"] != null)
        {
            // Thay vì dynamic, sử dụng IEnumerable<LopHoc> cụ thể
            var lopHocList = ViewData["MaLop"] as IEnumerable<GPLX.Models.LopHoc>;
            if (lopHocList != null && lopHocList.Any())
            {
                @Html.DropDownListFor(m => m.MaLop, 
                    new SelectList(lopHocList, "MaLop", "DiaDiem"), 
                    "-- Chọn lớp --", 
                    new { @class = "form-control" })
            }
            else
            {
                <p>Không có dữ liệu lớp học để chọn.</p>
            }
        }
        else
        {
            <p>Không có dữ liệu lớp học để chọn.</p>
        }
    </div>

    <div class="form-group">
        <label for="NgayDangKy">Ngày đăng ký</label>
        <input type="date" class="form-control" id="NgayDangKy" name="NgayDangKy" value="@Model.NgayDangKy.ToString("yyyy-MM-dd")" />
    </div>

    <div class="form-group">
        <label for="TrangThaiDangKy">Trạng thái</label>
        <input type="text" class="form-control" id="TrangThaiDangKy" name="TrangThaiDangKy" value="@Model.TrangThaiDangKy" />
    </div>

    <div class="form-group">
        <label for="GhiChu">Ghi chú</label>
        <textarea class="form-control" id="GhiChu" name="GhiChu">@Model.GhiChu</textarea>
    </div>

    <button type="submit" class="btn btn-primary">Lưu</button>
    <a href="@Url.Action("Index", "DangKyKhoaHoc")" class="btn btn-secondary">Hủy</a>
</form>
